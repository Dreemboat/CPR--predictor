<!doctype html>
<html lang="ar" dir="ltr">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="static/ css/style.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" integrity="sha384-nU14brUcp6StFntEOOEBvcJm4huWjB0OcIeQ3fltAfSmuZFrkAif0T+UtNGlKKQv" crossorigin="anonymous">

    <title>Car Price Predictor</title>
  </head>

  <body class="bg-dark">

  <div class="container">
    <div class="row">
      <div class="card mt-50" style="width: 100%; height: 100%">

        <div class="card-header">
          <div class="col-12" style="text-align: center">
            <h1>Welcome to the car price predictor</h1>
          </div>
        </div>

        <div class="card-body">

          <form method="post" action="#" accept-charset="utf-8">

            <div class="col-10 form-group" style="text-align: center">
              <label><b>Select a company</b></label>
              <select class="select-picker form-control" id="company" name="company" required="1">

                {% for company in company%}
                  <option value="{{company}}">{{company}}</option>
                {% endfor %}
              </select>
            </div>

            <div class="col-10 form-group" style="text-align: center">
              <label><b>Select a car name</b></label>
              <select class="select-picker form-control" id="name" name="name" required="1">

                {% for name in name%}

                  <option value="{{name}}">{{name}}</option>
                {% endfor %}


              </select>
            </div>

            <div class="col-10 form-group" style="text-align: center">
              <label><b>Select model Year</b></label>
              <select class="select-picker form-control" id="model_year" name="model_year" required="1">

                {% for year in year%}

                  <option value="{{year}}">{{year}}</option>
                {% endfor %}

              </select>
            </div>

            <div class="col-10 form-group" style="text-align: center">
              <label><b>Select Fuel Type</b></label>
              <select class="select-picker form-control" id="fuel_type" name="fuel_type" required="1">

                {% for fuel_type in fuel_type%}

                  <option value="{{fuel_type}}">{{fuel_type}}</option>
                {% endfor %}

              </select>
            </div>

            <div class="col-10 form-group" style="text-align: center">
              <label><b>Enter Number Of Kilometers Driven</b></label>
              <input class="form-control" type="number" id="kms_driven" name="kms_driven" placeholder="Only in number's 'Ex: 10000'">
            </div>

            <div class="col-10 form-group" style="text-align: center">
              <button class="btn btn-primary form-control" onclick="send_data()">Predict price</button>
            </div>

          </form>
          <br>

          <div class="row">

            <div class="col-12" style="text-align: center">
              <h3><span id="prediction"></span></h3>
            </div>

          </div>

        </div>

      </div>
    </div>
  </div>

  <script>

    function form_handler(event)

    {
      event.PreventDefault():
    }

    function send_data()
    {

      document.querySelector('form').addEventListener('submit', form_handler);

      var fd = new FormData(document.querySelector('form'));

      var xhr = new XMLHttpRequest();

      xhr.open('POST', '/predict', true);
      document.getElementId('prediction'). innerHTML= 'Please Wait...';

      xhr.onreadyStateChange = function()
      {
        if(xhr.readyState == XMLHttpRequest.DONE)
        {
          document.getElementById('prediction').InnerHTML= 'Prediction: Rs'+ xhr.responseText;
        }
      }

      xhr.onload=function();
      xhr.send(fd);


    }

  </script>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

  </body>
</html>
